<!DOCTYPE html>
<html lang="en" ng-app="checkbook">

<head>
  <meta charset="UTF-8">
  <title></title>

  <link rel="stylesheet" href="/bower_components/bootstrap/dist/css/bootstrap.min.css">

</head>

<body ng-controller="CheckbookController as cbCtrl">
  <div class="container">
    <div class="row">
      <div class="col-md-10 col-md-offset-1">


        <h4>Starting Balance</h4>
        <form>
          <div class="form-group">
            <div class="input-group">
              <div class="input-group-addon">$</div>
              <input class="form-control" ng-model="cbCtrl.startingBalance" type="number">
            </div>
          </div>
        </form>

        <h4>Transactions</h4>
        <table class="table table-striped table-bordered">
          <thead>
            <tr>
              <th>Date</th>
              <th>Description</th>
              <th>Amount</th>
              <th>Running Balance</th>
              <th>Edit</th>
            </tr>
          </thead>
          <tbody>
            <tr ng-repeat="transaction in cbCtrl.transactions | orderBy:'-date':true" ng-class="{'success': transaction.amount > 0}">

              <td ng-hide="transaction.editing">{{ transaction.date | date }}</td>
              <td ng-show="transaction.editing">
                <input type="text" ng-model="transaction.date" value="{{ transaction.date }}" />
              </td>

              <td ng-hide="transaction.editing">{{ transaction.description }}</td>
              <td ng-show="transaction.editing">
                <input type="text" ng-model="transaction.description" value="{{ transaction.description}}" />
              </td>

              <td ng-hide="transaction.editing">{{ transaction.amount | currency }}</td>
              <td ng-show="transaction.editing">
                <input type="number" ng-model="transaction.amount" value="{{ transaction.amount }}" />
              </td>

              <td>{{ cbCtrl.getBalance($index) | currency }}</td>

              <td>

                <button class="btn btn-default btn-sm" ng-hide="transaction.editing" ng-click="cbCtrl.toggleEditTransaction(transaction)">
                  <span class="glyphicon glyphicon-edit" aria-hidden="true"></span>
                </button>
                <button class="btn btn-success btn-sm" ng-show="transaction.editing" ng-click="cbCtrl.toggleEditTransaction(transaction)">
                  <span class="glyphicon glyphicon-saved" aria-hidden="true"></span>
                </button>

                <button class="btn btn-info btn-sm" ng-click="cbCtrl.repeatTransaction(transaction)">
                  <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>
                </button>
                <button class="btn btn-danger btn-sm" ng-click="cbCtrl.removeTransaction(transaction)">
                  <span class="glyphicon glyphicon-remove" aria-hidden="true"></span>
                </button>
              </td>
            </tr>
          </tbody>
        </table>

        <h4>New Transaction</h4>
        <form class="form-inline" ng-submit="cbCtrl.saveTransaction()">

          <div class="form-group">
            <input type="text" class="form-control" ng-model="cbCtrl.date" placeholder="6/3/2015">
          </div>

          <div class="form-group">
            <input type="text" class="form-control" ng-model="cbCtrl.description" placeholder="Description">
          </div>

          <div class="form-group">
            <div class="input-group">
              <div class="input-group-addon">$</div>
              <input type="number" class="form-control" ng-model="cbCtrl.amount" placeholder="Amount">
            </div>
          </div>

          <input type="submit" class="btn btn-primary" value="Add Transaction">

        </form>

        <hr>
        <div class="btn-group" role="group" aria-label="...">
          <button ng-click="cbCtrl.save()" type="button" class="btn btn-default">Save</button>
          <button ng-click="cbCtrl.load()" type="button" class="btn btn-default">Load</button>
        </div>

        <h4>TODO</h4>
        <ul>
          <li>Switch from cookie to local storage</li>
        </ul>

      </div>
    </div>
  </div>
  <script src="/bower_components/angular/angular.min.js"></script>
  <script src="/bower_components/angular-cookies/angular-cookies.min.js"></script>
  <script src="checkbook.js"></script>
</body>

</html>
